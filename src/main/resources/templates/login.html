
<!DOCTYPE html >
<html  xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>

    <title>理财平台后台-登录</title>
    <meta name="renderer" content="webkit"></meta>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"></meta>
    <link href="../static/layui/css/layui.css" th:href="@{/layui/css/layui.css}" rel="stylesheet" ></link>
    <link id="layuicss-layer" rel="stylesheet" th:href="@{/layui/css/modules/layer/default/layer.css}" href="../static/layui/css/modules/layer/default/layer.css" media="all"></link>
    <link id="layuicss-layuiAdmin" rel="stylesheet" th:href="@{/css/index/admin-1.css}" href="../static/css/index/admin-1.css" media="all"></link>
    <link th:href="@{/css/index/login-1.css}" href="../static/css/index/login-1.css" rel="stylesheet"></link>
    <link th:href="@{/css/index/font-awesome.css}" href="../static/css/index/font-awesome.css" rel="stylesheet"></link>
</head>
<body class="layui-layout-body">
<div id="LAY_app">
    <div class="layadmin-user-login" id="LAY-user-login" style="display: none;">

        <div class="layadmin-user-login-main">
            <div class="layadmin-user-login-box layadmin-user-login-header">
                <h2>银行理财后台管理系统</h2>
                <p>哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈</p>
            </div>
            <div class="layadmin-user-login-box layadmin-user-login-body layui-form">
                <form class="layui-form" id="login" th:action="@{/user/dologin}" th:object="${login}" th:method="post">
                    <div class="layui-form-item">
                            <input type="text" name="name" lay-verify="required" autocomplete="off"
                                   placeholder="请输入用户名" class="layui-input" th:field="*{name}"/>
                    </div>
                    <div class="layui-form-item">
                        <input type="password" name="password" lay-verify="required" autocomplete="off"
                                   placeholder="请输入密码" class="layui-input" th:field="*{password}"/>
                    </div>
                    <div class="layui-form-item">
                        <input type="checkbox" lay-skin="primary" title="记住账号" name="remember" value="1" checked=""/>
                        <div class="layui-unselect layui-form-checkbox" lay-skin="primary"><span>记住账号?</span><i class="layui-icon"></i></div>
                    </div>
                    <div class="layui-form-item">
                        <!--<button class="layui-btn" lay-submit="submit" lay-filter="formDemo">登录</button>-->
                        <button class="layui-btn layui-btn-fluid" lay-submit="submit" lay-filter="login">登 录</button>
                    </div>
                </form>
            </div>
        </div>

    </div>

</div>

<script src="../static/layui/layui.js"  th:src="@{/layui/layui.js}"></script>
<script src="../static/js/jquery-3.3.1.js"  th:src="@{/js/jquery-3.3.1.js}"></script>
<script th:inline="javascript">
    layui.use(['layer', 'form'], function() {
        var layer = layui.layer,
            $ = layui.jquery,
            form = layui.form;
        $(window).on('load', function() {
            form.on('submit(login)', function(data) {
                $.ajax({
                    url:/*[[@{/user/dologin}]]*/'',
                    data:data.field,
                    type:'post',
                    async: true,
                    success:function(data) {
                        /*layer.msg(data.msg,{offset: '50px',anim: 1});*/
                        if(data.success == true) {
                            layer.msg(data.msg + '<br/>3秒后跳转到登录页', {icon: 6});
                                setTimeout(function() {
                                    location.href = "index/admin";
                                }, 3000);
                        } else {
                            alert("登录失败")
                        }
                    }
                });
                return false;
            });
        });
    });
</script>
</body>
</html>